\hypertarget{flight__command_8c_source}{}\doxysection{flight\+\_\+command.\+c}
\label{flight__command_8c_source}\index{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/flight\_command.c@{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/flight\_command.c}}
\mbox{\hyperlink{flight__command_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00001}00001 \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00002}00002 \textcolor{comment}{  October 2012}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00003}00003 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00004}00004 \textcolor{comment}{  aq32Plus Rev -\/}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00005}00005 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00006}00006 \textcolor{comment}{  Copyright (c) 2012 John Ihlein.  All rights reserved.}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00007}00007 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00008}00008 \textcolor{comment}{  Open Source STM32 Based Multicopter Controller Software}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00009}00009 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00010}00010 \textcolor{comment}{  Includes code and/or ideas from:}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00011}00011 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00012}00012 \textcolor{comment}{  1)AeroQuad}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00013}00013 \textcolor{comment}{  2)BaseFlight}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00014}00014 \textcolor{comment}{  3)CH Robotics}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00015}00015 \textcolor{comment}{  4)MultiWii}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00016}00016 \textcolor{comment}{  5)S.O.H. Madgwick}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00017}00017 \textcolor{comment}{  6)UAVX}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00018}00018 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00019}00019 \textcolor{comment}{  Designed to run on the AQ32 Flight Control Board}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00020}00020 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00021}00021 \textcolor{comment}{  This program is free software: you can redistribute it and/or modify}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00022}00022 \textcolor{comment}{  it under the terms of the GNU General Public License as published by}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00023}00023 \textcolor{comment}{  the Free Software Foundation, either version 3 of the License, or}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00024}00024 \textcolor{comment}{  (at your option) any later version.}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00025}00025 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00026}00026 \textcolor{comment}{  This program is distributed in the hope that it will be useful,}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00027}00027 \textcolor{comment}{  but WITHOUT ANY WARRANTY; without even the implied warranty of}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00028}00028 \textcolor{comment}{  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00029}00029 \textcolor{comment}{  GNU General Public License for more details.}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00030}00030 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00031}00031 \textcolor{comment}{  You should have received a copy of the GNU General Public License}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00032}00032 \textcolor{comment}{  along with this program. If not, see <http://www.gnu.org/licenses/>.}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00033}00033 \textcolor{comment}{ */}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00037}00037 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{board_8h}{board.h}}"{}}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00040}00040 \textcolor{comment}{// Process Pilot Commands Defines and Variables}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00042}00042 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00043}\mbox{\hyperlink{flight__command_8c_aa7ec4b36be7336ea09ed4944e3029c78}{00043}} uint8\_t  \mbox{\hyperlink{flight__command_8c_aa7ec4b36be7336ea09ed4944e3029c78}{commandInDetent}}[3]         = \{ \textcolor{keyword}{true}, \textcolor{keyword}{true}, \textcolor{keyword}{true} \};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00044}\mbox{\hyperlink{flight__command_8c_afba620164d81adc771510752f70e7cc8}{00044}} uint8\_t  \mbox{\hyperlink{flight__command_8c_afba620164d81adc771510752f70e7cc8}{previousCommandInDetent}}[3] = \{ \textcolor{keyword}{true}, \textcolor{keyword}{true}, \textcolor{keyword}{true} \};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00047}00047 \textcolor{keyword}{extern} uint16\_t \mbox{\hyperlink{flight__command_8c_a471e5bdeaa5f17529cc51a54fc4b12e5}{ibusChannels}}[\mbox{\hyperlink{drv__ibus_8h_aad403df27c4671b0787f75525ee666ad}{RC\_CHANNELS}}];}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00049}00049 \textcolor{comment}{// Flight Mode Defines and Variables}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00051}00051 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00052}\mbox{\hyperlink{flight__command_8c_a37e90f5e3bd99fac2021fb3a326607d4}{00052}} uint8\_t \mbox{\hyperlink{flight__command_8c_a37e90f5e3bd99fac2021fb3a326607d4}{mode}} = \mbox{\hyperlink{_autodrone32_8h_a06fc87d81c62e9abb8790b6e5713c55ba1e3af4a87374fcc9dcb397ee98b47b65}{FLIGHT}};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00054}\mbox{\hyperlink{flight__command_8c_aa5e0dd4f5a127ad9b7df7da86f717820}{00054}} uint8\_t \mbox{\hyperlink{flight__command_8c_aa5e0dd4f5a127ad9b7df7da86f717820}{headingHoldEngaged}}     = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00057}00057 \textcolor{comment}{// Arm State Variables}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00059}00059 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00060}\mbox{\hyperlink{flight__command_8c_a8a1c07a2b10dfb3f7633b8db1d1dac4a}{00060}} \mbox{\hyperlink{_autodrone32_8h_a3d5a901a753342ccfc67d9706af13165}{semaphore\_t}} \mbox{\hyperlink{flight__command_8c_a8a1c07a2b10dfb3f7633b8db1d1dac4a}{armed}}          = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00061}\mbox{\hyperlink{flight__command_8c_aa17cd4729b354f25c53300d973288213}{00061}} uint8\_t     \mbox{\hyperlink{flight__command_8c_aa17cd4729b354f25c53300d973288213}{armingTimer}}    = 0;}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00062}\mbox{\hyperlink{flight__command_8c_abaaaab74a851da13a44ccd63988196cc}{00062}} uint8\_t     \mbox{\hyperlink{flight__command_8c_abaaaab74a851da13a44ccd63988196cc}{disarmingTimer}} = 0;}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00065}00065 \textcolor{comment}{// Read Flight Commands}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00067}\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{00067}} \textcolor{comment}{}int16\_t \mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[8];}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00069}\mbox{\hyperlink{flight__command_8c_a9cd2a65048398c923b5603a2ce46b2a2}{00069}} \textcolor{keywordtype}{void} \mbox{\hyperlink{flight__command_8c_a9cd2a65048398c923b5603a2ce46b2a2}{processFlightCommands}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00070}00070 \{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00071}00071     uint8\_t channel;}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00072}00072     uint8\_t channelsToRead = 8;}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00074}00074     \textcolor{keywordflow}{if} ( \mbox{\hyperlink{drv__ibus_8c_af6184e9a83b153bfe00e7716282f04d1}{rcActive}} == \textcolor{keyword}{true} )}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00075}00075     \{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00077}00077         \textcolor{comment}{/* Makes RPY from -\/1000 to 1000 */}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00078}00078         \mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}}]  = (\mbox{\hyperlink{flight__command_8c_a471e5bdeaa5f17529cc51a54fc4b12e5}{ibusChannels}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}}] * 2)  -\/ \mbox{\hyperlink{_autodrone32_8h_a234028ed2ada0d36313adecfaf732ff9}{MIDCOMMAND}}; \textcolor{comment}{// Roll Range  -\/1000:1000}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00079}00079         \mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] = (\mbox{\hyperlink{flight__command_8c_a471e5bdeaa5f17529cc51a54fc4b12e5}{ibusChannels}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] * 2) -\/ \mbox{\hyperlink{_autodrone32_8h_a234028ed2ada0d36313adecfaf732ff9}{MIDCOMMAND}};   \textcolor{comment}{// Pitch Range -\/1000:1000}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00080}00080         \mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}]   = (\mbox{\hyperlink{flight__command_8c_a471e5bdeaa5f17529cc51a54fc4b12e5}{ibusChannels}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}] * 2)   -\/ \mbox{\hyperlink{_autodrone32_8h_a234028ed2ada0d36313adecfaf732ff9}{MIDCOMMAND}};   \textcolor{comment}{// Yaw Range   -\/1000:1000}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00082}00082         \textcolor{comment}{/* Makes all other channels from 2000 to 4000 */}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00083}00083         \textcolor{keywordflow}{for} (channel = 3; channel < channelsToRead; channel++)}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00084}00084             \mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[channel] = \mbox{\hyperlink{flight__command_8c_a471e5bdeaa5f17529cc51a54fc4b12e5}{ibusChannels}}[channel] * 2;}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00085}00085     \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00086}00086 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00087}00087     \textcolor{comment}{// Set past command in detent values}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00088}00088     \textcolor{keywordflow}{for} (channel = 0; channel < 3; channel++)}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00089}00089         \mbox{\hyperlink{flight__command_8c_afba620164d81adc771510752f70e7cc8}{previousCommandInDetent}}[channel] = \mbox{\hyperlink{flight__command_8c_aa7ec4b36be7336ea09ed4944e3029c78}{commandInDetent}}[channel];}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00090}00090 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00091}00091     \textcolor{comment}{// Apply deadbands and set detent discretes'}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00092}00092     \textcolor{keywordflow}{for} (channel = 0; channel < 3; channel++)}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00093}00093     \{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00094}00094         \textcolor{comment}{/* RPY is within deadband */}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00095}00095         \textcolor{keywordflow}{if} ((\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[channel] <= \mbox{\hyperlink{flight__command_8h_a196c194bd32527a119ac607d3b2330b6}{DEADBAND}}) \&\& (\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[channel] >= -\/\mbox{\hyperlink{flight__command_8h_a196c194bd32527a119ac607d3b2330b6}{DEADBAND}}))}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00096}00096         \{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00097}00097             \mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[channel] = 0;          \textcolor{comment}{// set command to 0}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00098}00098             \mbox{\hyperlink{flight__command_8c_aa7ec4b36be7336ea09ed4944e3029c78}{commandInDetent}}[channel] = \textcolor{keyword}{true}; \textcolor{comment}{// command IS within detent}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00099}00099         \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00100}00100         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00101}00101         \{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00102}00102             \mbox{\hyperlink{flight__command_8c_aa7ec4b36be7336ea09ed4944e3029c78}{commandInDetent}}[channel] = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00103}00103             \textcolor{keywordflow}{if} (\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[channel] > 0)}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00104}00104             \{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00105}00105                 \mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[channel] = (\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[channel] -\/ \mbox{\hyperlink{flight__command_8h_a196c194bd32527a119ac607d3b2330b6}{DEADBAND}}) * \mbox{\hyperlink{flight__command_8h_aff2db53de34ab9f0f712f2cdef478882}{DEADBAND\_SLOPE}};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00106}00106             \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00107}00107             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00108}00108             \{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00109}00109                 \mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[channel] = (\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[channel] + \mbox{\hyperlink{flight__command_8h_a196c194bd32527a119ac607d3b2330b6}{DEADBAND}}) * \mbox{\hyperlink{flight__command_8h_aff2db53de34ab9f0f712f2cdef478882}{DEADBAND\_SLOPE}};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00110}00110             \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00111}00111         \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00112}00112     \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00113}00113 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00115}00115 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00116}00116     \textcolor{comment}{/*      Check for disarm switch */}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00117}00117     \textcolor{keywordflow}{if}(\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_a265717fcdca0aad3e296d063c4f1b760}{AUX1}}] < \mbox{\hyperlink{_autodrone32_8h_a234028ed2ada0d36313adecfaf732ff9}{MIDCOMMAND}})\{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00118}00118         \mbox{\hyperlink{pid_8c_aaf22589c0540858f845cba698115b4dd}{zeroPIDstates}}();}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00119}00119         \mbox{\hyperlink{flight__command_8c_a8a1c07a2b10dfb3f7633b8db1d1dac4a}{armed}} = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00120}00120         \mbox{\hyperlink{flight__command_8c_abaaaab74a851da13a44ccd63988196cc}{disarmingTimer}} = 0;}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00121}00121 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00122}00122         \textcolor{comment}{// Check for gyro bias command ( low throttle, left yaw, aft pitch, right roll )}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00123}00123         \textcolor{keywordflow}{if} ( (\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}  ] < (\mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_a6daa80d9fe2438fcc4b755817f9502a6}{minCheck}} -\/ \mbox{\hyperlink{_autodrone32_8h_a234028ed2ada0d36313adecfaf732ff9}{MIDCOMMAND}})) \&\&       \textcolor{comment}{//mincheck = 2200}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00124}00124                 (\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}} ] > (\mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_a1128de0037d8dd93b3824b375c463bd3}{maxCheck}} -\/ \mbox{\hyperlink{_autodrone32_8h_a234028ed2ada0d36313adecfaf732ff9}{MIDCOMMAND}})) \&\&   \textcolor{comment}{//maxcheck = 3800}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00125}00125                 (\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] < (\mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_a6daa80d9fe2438fcc4b755817f9502a6}{minCheck}} -\/ \mbox{\hyperlink{_autodrone32_8h_a234028ed2ada0d36313adecfaf732ff9}{MIDCOMMAND}})) )}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00126}00126         \{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00127}00127             \mbox{\hyperlink{mpu6000_8c_acb7732c2d9d2c63ad23af99706e5941d}{computeMPU6000RTData}}();}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00128}00128 \textcolor{comment}{//          pulseMotors(3);}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00129}00129         \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00130}00130     \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00131}00131 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00132}00132     \textcolor{comment}{/*      Check for arm switch and throttle low(<2200)    */}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00133}00133     \textcolor{keywordflow}{if}((\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_a265717fcdca0aad3e296d063c4f1b760}{AUX1}}] > \mbox{\hyperlink{_autodrone32_8h_a234028ed2ada0d36313adecfaf732ff9}{MIDCOMMAND}}) \&\&}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00134}00134             (\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_a96e6d6c3e78916bb163b52f0ea38ba68}{THROTTLE}}] < \mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_a6daa80d9fe2438fcc4b755817f9502a6}{minCheck}}) \&\&}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00135}00135             (\mbox{\hyperlink{flight__command_8c_a8a1c07a2b10dfb3f7633b8db1d1dac4a}{armed}} == \textcolor{keyword}{false}))\{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00136}00136         \mbox{\hyperlink{pid_8c_aaf22589c0540858f845cba698115b4dd}{zeroPIDstates}}();}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00137}00137         \mbox{\hyperlink{flight__command_8c_a8a1c07a2b10dfb3f7633b8db1d1dac4a}{armed}} = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00138}00138     \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00139}00139 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00140}00140 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00142}00142 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00143}00143     \textcolor{comment}{// Check for armed true and throttle command > minThrottle}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00144}00144 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00145}00145     \textcolor{keywordflow}{if} ((\mbox{\hyperlink{flight__command_8c_a8a1c07a2b10dfb3f7633b8db1d1dac4a}{armed}} == \textcolor{keyword}{true}) \&\& (\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_a96e6d6c3e78916bb163b52f0ea38ba68}{THROTTLE}}] > \mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_a15003441b8f0bb4c12c4f417e76e27a9}{minThrottle}}))}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00146}00146         \mbox{\hyperlink{pid_8c_a2411ec293e48a57a17a63d25e1c47907}{pidReset}} = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00147}00147     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00148}00148         \mbox{\hyperlink{pid_8c_a2411ec293e48a57a17a63d25e1c47907}{pidReset}} = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00149}00149 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00151}00151 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00152}00152     \textcolor{comment}{// Check AUX1 for rate, attitude, or GPS mode (3 Position Switch) NOT COMPLETE YET....}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00153}00153 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00154}00154     \textcolor{keywordflow}{if} ((\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_a30059d90eb19b3af333f29f0a44f39f8}{AUX2}}] > \mbox{\hyperlink{_autodrone32_8h_a234028ed2ada0d36313adecfaf732ff9}{MIDCOMMAND}}) \&\&}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00155}00155             (\mbox{\hyperlink{flight__command_8c_a37e90f5e3bd99fac2021fb3a326607d4}{mode}} == \mbox{\hyperlink{_autodrone32_8h_a06fc87d81c62e9abb8790b6e5713c55ba20364949ea9fb383c6b8baf4bf249c6a}{ROVER}}) \&\&}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00156}00156             (\mbox{\hyperlink{flight__command_8c_a8a1c07a2b10dfb3f7633b8db1d1dac4a}{armed}} == \textcolor{keyword}{false}))}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00157}00157     \{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00158}00158         \mbox{\hyperlink{flight__command_8c_a37e90f5e3bd99fac2021fb3a326607d4}{mode}} = \mbox{\hyperlink{_autodrone32_8h_a06fc87d81c62e9abb8790b6e5713c55ba1e3af4a87374fcc9dcb397ee98b47b65}{FLIGHT}};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00159}00159         \mbox{\hyperlink{pid_8c_a02dc45a9a10c03f0dc29ef31c0da5368}{setPIDstates}}(\mbox{\hyperlink{_autodrone32_8h_aa6cdf8ae8cfa8c94747830d9e0431643}{ROLL\_ATT\_PID}},  0.0f);}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00160}00160         \mbox{\hyperlink{pid_8c_a02dc45a9a10c03f0dc29ef31c0da5368}{setPIDstates}}(\mbox{\hyperlink{_autodrone32_8h_aa5049e31750ce30b89716ffca24dc90d}{PITCH\_ATT\_PID}}, 0.0f);}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00161}00161         \mbox{\hyperlink{pid_8c_a02dc45a9a10c03f0dc29ef31c0da5368}{setPIDstates}}(\mbox{\hyperlink{_autodrone32_8h_a52de2a501e95e89b76b389a9a9677a12}{HEADING\_PID}},   0.0f);}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00162}00162     \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00163}00163     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((\mbox{\hyperlink{flight__command_8c_ab51ddf40215639ed956046378ceb51d9}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_a30059d90eb19b3af333f29f0a44f39f8}{AUX2}}] <= \mbox{\hyperlink{_autodrone32_8h_a234028ed2ada0d36313adecfaf732ff9}{MIDCOMMAND}}) \&\&}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00164}00164             (\mbox{\hyperlink{flight__command_8c_a37e90f5e3bd99fac2021fb3a326607d4}{mode}} == \mbox{\hyperlink{_autodrone32_8h_a06fc87d81c62e9abb8790b6e5713c55ba1e3af4a87374fcc9dcb397ee98b47b65}{FLIGHT}}) \&\&}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00165}00165             (\mbox{\hyperlink{flight__command_8c_a8a1c07a2b10dfb3f7633b8db1d1dac4a}{armed}} == \textcolor{keyword}{false}))}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00166}00166     \{}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00167}00167         \mbox{\hyperlink{flight__command_8c_a37e90f5e3bd99fac2021fb3a326607d4}{mode}} = \mbox{\hyperlink{_autodrone32_8h_a06fc87d81c62e9abb8790b6e5713c55ba20364949ea9fb383c6b8baf4bf249c6a}{ROVER}};}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00168}00168     \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00169}00169 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00171}00171 \}}
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00172}00172 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00174}00174 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00175}00175 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00176}00176 }
\DoxyCodeLine{\Hypertarget{flight__command_8c_source_l00177}00177 }

\end{DoxyCode}
