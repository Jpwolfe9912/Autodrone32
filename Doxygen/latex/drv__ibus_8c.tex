\hypertarget{drv__ibus_8c}{}\doxysection{/\+Users/jeremywolfe/\+Documents/\+STM32\+Cube\+IDE/\+Autodrone32/\+Src/drv/drv\+\_\+ibus.c File Reference}
\label{drv__ibus_8c}\index{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/drv/drv\_ibus.c@{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/drv/drv\_ibus.c}}


This file initializes the ibus receiver protocol.  


{\ttfamily \#include \char`\"{}board.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{drv__ibus_8c_af79bcf473fa604b9bcddae0117ff0615}{ibus\+Init}} (void)
\begin{DoxyCompactList}\small\item\em Initializes ibus ring buffer and low level usart registers. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drv__ibus_8c_a6973c6b108b25985f4c960dab82d92c8}{ibus\+Process}} (void)
\begin{DoxyCompactList}\small\item\em Waits for the parser to not be busy. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drv__ibus_8c_a7139cd4baabbbcbab0c1fe6d7d4ae1cc}{USART1\+\_\+\+IRQHandler}} (void)
\begin{DoxyCompactList}\small\item\em USART1 global interrupt handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drv__ibus_8c_a7e367d7c7b74485c4c75cdef30ad01e1}{DMA2\+\_\+\+Stream2\+\_\+\+IRQHandler}} (void)
\begin{DoxyCompactList}\small\item\em DMA2\+\_\+\+Stream2 global interrupt handler. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \mbox{\hyperlink{drv__ibus_8c_a1f7d351054db12d0e67ab4e90bb61e3c}{ibus\+Payload}} \mbox{[}\mbox{\hyperlink{drv__ibus_8h_a3fb2dea7d964f6ed95dfac2897c4001d}{PAYLOAD\+\_\+\+SIZE}}\mbox{]}
\item 
uint16\+\_\+t \mbox{\hyperlink{drv__ibus_8c_a471e5bdeaa5f17529cc51a54fc4b12e5}{ibus\+Channels}} \mbox{[}\mbox{\hyperlink{drv__ibus_8h_aad403df27c4671b0787f75525ee666ad}{RC\+\_\+\+CHANNELS}}\mbox{]}
\item 
uint8\+\_\+t \mbox{\hyperlink{drv__ibus_8c_a0b57aa10271a66f3dc936bba1d2f3830}{state}}
\item 
uint8\+\_\+t \mbox{\hyperlink{drv__ibus_8c_a4d43e8212bdc9dbee866506f04effcea}{cmd}}
\item 
uint8\+\_\+t \mbox{\hyperlink{drv__ibus_8c_a5060d9399d0f25c7695ab7a78146839b}{frame\+Length}}
\item 
uint8\+\_\+t \mbox{\hyperlink{drv__ibus_8c_a29618f7785a8550558d9e6798271e7d3}{frame\+Pos}}
\item 
uint8\+\_\+t \mbox{\hyperlink{drv__ibus_8c_a360603720ae8b2c0e4931dd0f648c504}{dev\+\_\+id}} = 0
\item 
bool \mbox{\hyperlink{drv__ibus_8c_af6184e9a83b153bfe00e7716282f04d1}{rc\+Active}} = false
\item 
bool \mbox{\hyperlink{drv__ibus_8c_a6d620a6bd078d03d656eb1470b11da22}{failsafe}} = false
\item 
\mbox{\hyperlink{drv__ibus_8h_a5a62ceacfdb82fe56aba16e8387b8570}{ibus\+Status\+\_\+e}} \mbox{\hyperlink{drv__ibus_8c_a2cc3a1395706a276ba8a808b6f72e5c0}{status}}
\item 
uint8\+\_\+t \mbox{\hyperlink{drv__ibus_8c_aa1faa97224188463799dfeb970d588aa}{error\+Time\+Out}}
\item 
uint32\+\_\+t \mbox{\hyperlink{drv__ibus_8c_a2f9cac7f39fece6efa98ecb46fabb9b7}{error\+Count}} = 0
\item 
uint32\+\_\+t \mbox{\hyperlink{drv__ibus_8c_a9885da91b76c63e61bcfea446cf53a2e}{ready\+Count}} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file initializes the ibus receiver protocol. 

\begin{DoxyAuthor}{Author}
Jeremy Wolfe 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
23 FEB 2022 
\end{DoxyDate}
\begin{DoxyRefDesc}{Bug}
\item[\mbox{\hyperlink{bug__bug000006}{Bug}}]\end{DoxyRefDesc}


Definition in file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{drv__ibus_8c_a7e367d7c7b74485c4c75cdef30ad01e1}\label{drv__ibus_8c_a7e367d7c7b74485c4c75cdef30ad01e1}} 
\index{drv\_ibus.c@{drv\_ibus.c}!DMA2\_Stream2\_IRQHandler@{DMA2\_Stream2\_IRQHandler}}
\index{DMA2\_Stream2\_IRQHandler@{DMA2\_Stream2\_IRQHandler}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{DMA2\_Stream2\_IRQHandler()}{DMA2\_Stream2\_IRQHandler()}}
{\footnotesize\ttfamily void DMA2\+\_\+\+Stream2\+\_\+\+IRQHandler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



DMA2\+\_\+\+Stream2 global interrupt handler. 

\begin{DoxyReturn}{Returns}
Void. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00344}{344}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_af79bcf473fa604b9bcddae0117ff0615}\label{drv__ibus_8c_af79bcf473fa604b9bcddae0117ff0615}} 
\index{drv\_ibus.c@{drv\_ibus.c}!ibusInit@{ibusInit}}
\index{ibusInit@{ibusInit}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{ibusInit()}{ibusInit()}}
{\footnotesize\ttfamily bool ibus\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Initializes ibus ring buffer and low level usart registers. 

\begin{DoxyReturn}{Returns}
bool True if initialization was successful. False if failed. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00046}{46}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a6973c6b108b25985f4c960dab82d92c8}\label{drv__ibus_8c_a6973c6b108b25985f4c960dab82d92c8}} 
\index{drv\_ibus.c@{drv\_ibus.c}!ibusProcess@{ibusProcess}}
\index{ibusProcess@{ibusProcess}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{ibusProcess()}{ibusProcess()}}
{\footnotesize\ttfamily void ibus\+Process (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Waits for the parser to not be busy. 

\begin{DoxyReturn}{Returns}
Void. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00095}{95}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a7139cd4baabbbcbab0c1fe6d7d4ae1cc}\label{drv__ibus_8c_a7139cd4baabbbcbab0c1fe6d7d4ae1cc}} 
\index{drv\_ibus.c@{drv\_ibus.c}!USART1\_IRQHandler@{USART1\_IRQHandler}}
\index{USART1\_IRQHandler@{USART1\_IRQHandler}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{USART1\_IRQHandler()}{USART1\_IRQHandler()}}
{\footnotesize\ttfamily void USART1\+\_\+\+IRQHandler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



USART1 global interrupt handler. 

\begin{DoxyReturn}{Returns}
Void. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00331}{331}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{drv__ibus_8c_a4d43e8212bdc9dbee866506f04effcea}\label{drv__ibus_8c_a4d43e8212bdc9dbee866506f04effcea}} 
\index{drv\_ibus.c@{drv\_ibus.c}!cmd@{cmd}}
\index{cmd@{cmd}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{cmd}{cmd}}
{\footnotesize\ttfamily uint8\+\_\+t cmd}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00025}{25}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a360603720ae8b2c0e4931dd0f648c504}\label{drv__ibus_8c_a360603720ae8b2c0e4931dd0f648c504}} 
\index{drv\_ibus.c@{drv\_ibus.c}!dev\_id@{dev\_id}}
\index{dev\_id@{dev\_id}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{dev\_id}{dev\_id}}
{\footnotesize\ttfamily uint8\+\_\+t dev\+\_\+id = 0}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00027}{27}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a2f9cac7f39fece6efa98ecb46fabb9b7}\label{drv__ibus_8c_a2f9cac7f39fece6efa98ecb46fabb9b7}} 
\index{drv\_ibus.c@{drv\_ibus.c}!errorCount@{errorCount}}
\index{errorCount@{errorCount}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{errorCount}{errorCount}}
{\footnotesize\ttfamily uint32\+\_\+t error\+Count = 0}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00036}{36}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_aa1faa97224188463799dfeb970d588aa}\label{drv__ibus_8c_aa1faa97224188463799dfeb970d588aa}} 
\index{drv\_ibus.c@{drv\_ibus.c}!errorTimeOut@{errorTimeOut}}
\index{errorTimeOut@{errorTimeOut}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{errorTimeOut}{errorTimeOut}}
{\footnotesize\ttfamily uint8\+\_\+t error\+Time\+Out}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00034}{34}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a6d620a6bd078d03d656eb1470b11da22}\label{drv__ibus_8c_a6d620a6bd078d03d656eb1470b11da22}} 
\index{drv\_ibus.c@{drv\_ibus.c}!failsafe@{failsafe}}
\index{failsafe@{failsafe}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{failsafe}{failsafe}}
{\footnotesize\ttfamily bool failsafe = false}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00030}{30}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a5060d9399d0f25c7695ab7a78146839b}\label{drv__ibus_8c_a5060d9399d0f25c7695ab7a78146839b}} 
\index{drv\_ibus.c@{drv\_ibus.c}!frameLength@{frameLength}}
\index{frameLength@{frameLength}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{frameLength}{frameLength}}
{\footnotesize\ttfamily uint8\+\_\+t frame\+Length}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00025}{25}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a29618f7785a8550558d9e6798271e7d3}\label{drv__ibus_8c_a29618f7785a8550558d9e6798271e7d3}} 
\index{drv\_ibus.c@{drv\_ibus.c}!framePos@{framePos}}
\index{framePos@{framePos}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{framePos}{framePos}}
{\footnotesize\ttfamily uint8\+\_\+t frame\+Pos}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00025}{25}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a471e5bdeaa5f17529cc51a54fc4b12e5}\label{drv__ibus_8c_a471e5bdeaa5f17529cc51a54fc4b12e5}} 
\index{drv\_ibus.c@{drv\_ibus.c}!ibusChannels@{ibusChannels}}
\index{ibusChannels@{ibusChannels}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{ibusChannels}{ibusChannels}}
{\footnotesize\ttfamily uint16\+\_\+t ibus\+Channels\mbox{[}\mbox{\hyperlink{drv__ibus_8h_aad403df27c4671b0787f75525ee666ad}{RC\+\_\+\+CHANNELS}}\mbox{]}}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00023}{23}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a1f7d351054db12d0e67ab4e90bb61e3c}\label{drv__ibus_8c_a1f7d351054db12d0e67ab4e90bb61e3c}} 
\index{drv\_ibus.c@{drv\_ibus.c}!ibusPayload@{ibusPayload}}
\index{ibusPayload@{ibusPayload}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{ibusPayload}{ibusPayload}}
{\footnotesize\ttfamily uint8\+\_\+t ibus\+Payload\mbox{[}\mbox{\hyperlink{drv__ibus_8h_a3fb2dea7d964f6ed95dfac2897c4001d}{PAYLOAD\+\_\+\+SIZE}}\mbox{]}}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00022}{22}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_af6184e9a83b153bfe00e7716282f04d1}\label{drv__ibus_8c_af6184e9a83b153bfe00e7716282f04d1}} 
\index{drv\_ibus.c@{drv\_ibus.c}!rcActive@{rcActive}}
\index{rcActive@{rcActive}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{rcActive}{rcActive}}
{\footnotesize\ttfamily bool rc\+Active = false}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00029}{29}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a9885da91b76c63e61bcfea446cf53a2e}\label{drv__ibus_8c_a9885da91b76c63e61bcfea446cf53a2e}} 
\index{drv\_ibus.c@{drv\_ibus.c}!readyCount@{readyCount}}
\index{readyCount@{readyCount}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{readyCount}{readyCount}}
{\footnotesize\ttfamily uint32\+\_\+t ready\+Count = 0}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00037}{37}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a0b57aa10271a66f3dc936bba1d2f3830}\label{drv__ibus_8c_a0b57aa10271a66f3dc936bba1d2f3830}} 
\index{drv\_ibus.c@{drv\_ibus.c}!state@{state}}
\index{state@{state}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{state}{state}}
{\footnotesize\ttfamily uint8\+\_\+t state}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00025}{25}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

\mbox{\Hypertarget{drv__ibus_8c_a2cc3a1395706a276ba8a808b6f72e5c0}\label{drv__ibus_8c_a2cc3a1395706a276ba8a808b6f72e5c0}} 
\index{drv\_ibus.c@{drv\_ibus.c}!status@{status}}
\index{status@{status}!drv\_ibus.c@{drv\_ibus.c}}
\doxysubsubsection{\texorpdfstring{status}{status}}
{\footnotesize\ttfamily \mbox{\hyperlink{drv__ibus_8h_a5a62ceacfdb82fe56aba16e8387b8570}{ibus\+Status\+\_\+e}} status}



Definition at line \mbox{\hyperlink{drv__ibus_8c_source_l00032}{32}} of file \mbox{\hyperlink{drv__ibus_8c_source}{drv\+\_\+ibus.\+c}}.

